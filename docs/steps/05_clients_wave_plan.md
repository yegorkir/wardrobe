---

## Definition of Done (Step 5)
Считаем Step 5 завершённым, если выполнено ВСЁ ниже:

### Functional
- При запуске через `Main.tscn` открывается Workdesk (как в Step 4), DnD работает как раньше.
- На каждом столе (`Desk_A`, `Desk_B`) виден:
  - плейсхолдер “клиент” (силуэт/цвет),
  - patience bar, который убывает.
- Терпение тикает **только** у клиентов, которые сейчас заняли стол (активные).
- Волна имеет локальный таймер (`_wave_time_left`):
  - при истечении времени и если обслужены не все клиенты → FAIL.
- Если у любого активного клиента терпение дошло до 0 → FAIL.
- Счётчик обслуженных клиентов увеличивается **только** по найденному доменному/desk событию “клиент обслужен”
  (Task F Discovery обязателен; без угадываний).
- WIN: когда обслужены все клиенты волны → вызывается `end_shift()`.

### UI / Input Safety
- Клиентский UI на столах не перекрывает предметы на DeskSlot (предмет читается поверх).
- ClientVisual/PatienceBar не блокируют DnD:
  - все новые Control-элементы имеют `mouse_filter = IGNORE`.
- Не добавлены новые перехватчики input, которые ломают `_unhandled_input` в WorkdeskScene.

### Architecture / Scope
- Изменения ограничены allowlist из документа.
- DnD и Step 4 файлы не менялись (forbidden соблюдён).
- Любые геттеры в setup-adapter — add-only и без поиска нод; данные трактуются как read-only.

### Tests / Smoke
- `GODOT_TEST_HOME="$PWD/.godot_test_home_persist" task tests` проходит.
- Manual smoke:
  - ничего не делать 10–15 сек → patience заметно убывает, возможен FAIL,
  - обслужить клиентов → WIN,
  - drag&drop по столам и шкафам не сломан.
